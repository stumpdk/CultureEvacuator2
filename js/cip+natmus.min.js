/**
 * CIP.js, NatMus.js, qwest, underscore.js
 *
 * https://github.com/NationalMuseumofDenmark
 */
var qwest=function(){var d=window,f=null,h=0,g=[],z=function(){return d.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},r=""===z().responseType,v=function(p,q,s,x,F){s=s||null;x=x||{};var G=!1,l=z(),t=void 0===x.async?!0:!!x.async,D=!!x.cache,y=x.type?x.type.toLowerCase():"json",I=x.user||"",u=x.password||"",m={"X-Requested-With":"XMLHttpRequest"},e="",A,B,C=[],a=[],c=[],k,J,K,E,H={success:function(a){return t?C.push(a):J&&a.apply(l,[k]),H},error:function(c){return t?a.push(c):
K&&c.apply(l,[k]),H},complete:function(a){return t?c.push(a):a.apply(l),H}},n={success:function(a){return g[g.length-1].success.push(a),n},error:function(a){return g[g.length-1].error.push(a),n},complete:function(a){return g[g.length-1].complete.push(a),n}},L=function(){var e,f,n;--h;if(g.length){f=g.shift();n=v(f.method,f.url,f.data,f.options,f.before);for(e=0;E=f.success[e];++e)n.success(E);for(e=0;E=f.error[e];++e)n.error(E);for(e=0;E=f.complete[e];++e)n.complete(E)}try{if(200!=l.status)throw l.status+
" ("+l.statusText+")";if("text"==y||"html"==y)k=l.responseText;else if(G&&void 0!==l.response)k=l.response;else switch(y){case "json":try{d.JSON?k=d.JSON.parse(l.responseText):k=eval("("+l.responseText+")")}catch(z){throw"Error while parsing JSON body";}break;case "js":k=eval(l.responseText);break;case "xml":if(!l.responseXML||l.responseXML.parseError&&l.responseXML.parseError.errorCode&&l.responseXML.parseError.reason)throw"Error while parsing XML body";k=l.responseXML;break;default:throw"Unsupported "+
y+" type";}J=!0;if(t)for(e=0;E=C[e];++e)E.apply(l,[k])}catch(p){if(K=!0,k="Request to '"+q+"' aborted: "+p,t)for(e=0;E=a[e];++e)E.apply(l,[k])}if(t)for(e=0;E=c[e];++e)E.apply(l)};if(f&&h==f)return g.push({method:p,url:q,data:s,options:x,before:F,success:[],error:[],complete:[]}),n;++h;if(d.ArrayBuffer&&(s instanceof ArrayBuffer||s instanceof Blob||s instanceof Document||s instanceof FormData))"GET"==p&&(s=null);else{x=[];B=encodeURIComponent;for(A in s)x.push(B(A)+(s[A].pop?"[]":"")+"="+B(s[A]));
s=x.join("&");B=!0}"GET"==p&&(e+=s);D||(e&&(e+="&"),e+="t="+Date.now());e&&(q+=(/\?/.test(q)?"&":"?")+e);l.open(p,q,t,I,u);if(y&&r)try{l.responseType=y,G=l.responseType==y}catch(S){}r?l.onload=L:l.onreadystatechange=function(){4==l.readyState&&L()};B&&"POST"==p&&(m["Content-Type"]="application/x-www-form-urlencoded");m.Accept={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}[y];for(A in m)l.setRequestHeader(A,
m[A]);return F&&F.apply(l),l.send("POST"==p?s:null),H};return{get:function(d,f,g,h){return v("GET",d,f,g,h)},post:function(d,f,g,h){return v("POST",d,f,g,h)},xhr2:r,limit:function(d){f=d}}}();window.console=window.console||{log:function(){},error:function(){}};function assert(d,f){if(!d)throw f||"Assertion failed.";}
function CIPCatalog(d,f){this.cip=d;for(var h in f)this[h]=f[h];this.alias=d.config.catalog_aliases[this.name];this.get_tables=function(f){assert(this.cip.is_connected());var h=[],r=this;this.cip.ciprequest("metadata/gettables/"+d.config.constants.catch_all_alias,{catalogname:this.name},function(d,p){for(var q=0;q<d.tables.length;q++)h.push(new CIPTable(this,r,d.tables[q]));f(h)})}}
function CIPTable(d,f,h){this.cip=d;this.catalog=f;this.name=h;this.layout=null;this.get_layout=function(d){assert(this.cip.is_connected());this.cip.ciprequest("metadata/getlayout/"+this.cip.config.constants.layout_alias,{catalogname:this.catalog.name,table:this.name},function(f){this.layout=null;d(this.layout)})};this.search=function(f,h){d.search(this,f,h)}}
function CIPAsset(d,f,h){this.cip=d;this.fields=f;this.get_field_value=function(d){};this.get_fields=function(){};this.get_asset_url=function(d){return void 0===d?this.cip.config.endpoint+"asset/download/"+h.alias+"/"+this.fields.id:this.cip.config.endpoint+"asset/download/"+h.alias+"/"+this.fields.id+"?version="+d};this.get_versions=function(d){this.cip.ciprequest("asset/getversions/"+h.alias+"/"+this.fields.id,{},function(f){d(f.versions)})};this.get_preview_url=function(){return this.cip.config.endpoint+
"preview/image/"+h.alias+"/"+this.fields.id};this.get_thumbnail_url=function(d){var f="",r="",v={},p=["size","maxsize","rotate","format","quality"];if(void 0!==d)for(var q in p)void 0!==d[p[q]]&&(v[p[q]]="format"!==p[q]?parseInt(d[p[q]]):d[p[q]]);for(var s in v)f+=r+s+"="+v[s],r="&";return this.cip.config.endpoint+"preview/thumbnail/"+h.alias+"/"+this.fields.id+"?"+f}}
function CIPSearchResult(d,f,h){this.cip=d;this.total_rows=f.totalcount;this.collection_id=f.collection;this.pointer=0;this.get=function(d){var f=[],r=this;void 0===d&&(d=100);this.cip.ciprequest("metadata/getfieldvalues/web",{collection:this.collection_id,startindex:this.pointer,maxreturned:d},function(d){for(var g=0;g<d.items.length;g++)f.push(new CIPAsset(this,d.items[g],h));r.pointer+=d.items.length});return f}}
function CIPLayout(d,f){this.cip=d;this.fields=f;this.lookup_field=function(d){for(var g=0;g<f.length;g++)if(this.fields[g].key===d)return this.fields[g]}}
function CIPClient(d){this.config=d;this.jsessionid=null;this.DEBUG=!0;this.cache={catalogs:null};this.ciprequest=function(d,h,g,z,r){void 0===r&&(r=!1);var v={apiversion:4,serveraddress:"localhost"};if(void 0!==h)for(var p in h)v[p]=h[p];null===this.jsessionid&&"session/open"!==d&&console.error("ERROR: No jsessionid");h=null===this.jsessionid?"":";jsessionid="+this.jsessionid;"function"===typeof g&&(g=g.bind(this));"function"===typeof z&&(z=z.bind(this));return qwest.post(this.config.endpoint+d+
h,v,{async:r},function(){}).success(g||function(g){console.log(["default success",d,g])}).error(z||function(g){console.log(["default error",d,g])})};this.session_open=function(d,h,g,z){var r=this;this.ciprequest("session/open",{user:d,password:h},function(d){d.jsessionid&&(r.jsessionid=d.jsessionid,console.log("Connected to CIP: "+r.jsessionid),g(d))},function(d){z(d)||console.error("Could not make request to CIP.")},!0)};this.session_close=function(){this.ciprequest("session/close",{})};this.is_connected=
function(){return null!==this.jsessionid};this.get_catalogs=function(d){assert(this.is_connected());null!==this.cache.catalogs&&d(this.cache.catalogs);this.ciprequest("metadata/getcatalogs",{},function(h){this.cache.catalogs=[];for(var g=0;g<h.catalogs.length;g++)this.cache.catalogs.push(new CIPCatalog(this,h.catalogs[g]));d(this.cache.catalogs)})};this.search=function(d,h,g){assert(this.is_connected());assert(void 0!==d.catalog.alias,"Catalog must have an alias.");assert(void 0!==h&&""!==h,"Must define a query");
this.ciprequest("metadata/search/"+d.catalog.alias,{quicksearchstring:h,table:d.name,collection:""},function(h){g(new CIPSearchResult(this,h,d.catalog))})};this.criteriasearch=function(d,h,g){assert(this.is_connected());assert(void 0!==d.catalog.alias,"Catalog must have an alias.");assert(void 0!==query&&""!==query,"Must define a query");this.ciprequest("metadata/search/"+d.catalog.alias,{querystring:h,table:d.name,collection:""},function(h){g(new CIPSearchResult(this,h,d.catalog))})};this.get_version=
function(d){this.ciprequest("system/getversion",{},function(h){d(h.version)})}}
var Zepto=function(){function d(b){return null==b?String(b):P[W.call(b)]||"object"}function f(b){return"function"==d(b)}function h(b){return null!=b&&b==b.window}function g(b){return null!=b&&b.nodeType==b.DOCUMENT_NODE}function z(b){return"object"==d(b)}function r(b){return z(b)&&!h(b)&&Object.getPrototypeOf(b)==Object.prototype}function v(b){return b instanceof Array}function p(b){return a.call(b,function(b){return null!=b})}function q(b){return b.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,
"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function s(b){return b in J?J[b]:J[b]=RegExp("(^|\\s)"+b+"(\\s|$)")}function x(b,a){return"number"!=typeof a||K[q(b)]?a:a+"px"}function F(b){return"children"in b?C.call(b.children):e.map(b.childNodes,function(b){if(1==b.nodeType)return b})}function G(b,a,c){for(m in a)c&&(r(a[m])||v(a[m]))?(r(a[m])&&!r(b[m])&&(b[m]={}),v(a[m])&&!v(b[m])&&(b[m]=[]),G(b[m],a[m],c)):a[m]!==u&&(b[m]=a[m])}function l(b,a){return null==a?e(b):
e(b).filter(a)}function t(b,a,c,d){return f(a)?a.call(b,c,d):a}function D(b,a){var c=b.className,d=c&&c.baseVal!==u;if(a===u)return d?c.baseVal:c;d?c.baseVal=a:b.className=a}function y(b){var a;try{return b?"true"==b||("false"==b?!1:"null"==b?null:/^0/.test(b)||isNaN(a=Number(b))?/^[\[\{]/.test(b)?e.parseJSON(b):b:a):b}catch(c){return b}}function I(b,a){a(b);for(var c in b.childNodes)I(b.childNodes[c],a)}var u,m,e,A,B=[],C=B.slice,a=B.filter,c=window.document,k={},J={},K={"column-count":1,columns:1,
"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},E=/^\s*<(\w+|!)[^>]*>/,H=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,n=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,L=/^(?:body|html)$/i,S=/([A-Z])/g,U="val css html text data width height offset".split(" "),O=c.createElement("table"),Q=c.createElement("tr"),R={tr:c.createElement("tbody"),tbody:O,thead:O,tfoot:O,td:Q,th:Q,"*":c.createElement("div")},V=/complete|loaded|interactive/,X=/^[\w-]*$/,P={},W=P.toString,w={},M,N,T=
c.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};return w.matches=function(b,a){if(!a||!b||1!==b.nodeType)return!1;var c=b.webkitMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector||b.matchesSelector;if(c)return c.call(b,a);var d,c=b.parentNode,e=!c;return e&&
(c=T).appendChild(b),d=~w.qsa(c,a).indexOf(b),e&&T.removeChild(b),d},M=function(b){return b.replace(/-+(.)?/g,function(b,a){return a?a.toUpperCase():""})},N=function(b){return a.call(b,function(a,c){return b.indexOf(a)==c})},w.fragment=function(b,a,d){var k,f,g;return H.test(b)&&(k=e(c.createElement(RegExp.$1))),k||(b.replace&&(b=b.replace(n,"<$1></$2>")),a===u&&(a=E.test(b)&&RegExp.$1),a in R||(a="*"),g=R[a],g.innerHTML=""+b,k=e.each(C.call(g.childNodes),function(){g.removeChild(this)})),r(d)&&(f=
e(k),e.each(d,function(b,a){-1<U.indexOf(b)?f[b](a):f.attr(b,a)})),k},w.Z=function(b,a){return b=b||[],b.__proto__=e.fn,b.selector=a||"",b},w.isZ=function(b){return b instanceof w.Z},w.init=function(b,a){var d;if(!b)return w.Z();if("string"==typeof b)if(b=b.trim(),"<"==b[0]&&E.test(b))d=w.fragment(b,RegExp.$1,a),b=null;else{if(a!==u)return e(a).find(b);d=w.qsa(c,b)}else{if(f(b))return e(c).ready(b);if(w.isZ(b))return b;if(v(b))d=p(b);else if(z(b))d=[b],b=null;else if(E.test(b))d=w.fragment(b.trim(),
RegExp.$1,a),b=null;else{if(a!==u)return e(a).find(b);d=w.qsa(c,b)}}return w.Z(d,b)},e=function(b,a){return w.init(b,a)},e.extend=function(b){var a,c=C.call(arguments,1);return"boolean"==typeof b&&(a=b,b=c.shift()),c.forEach(function(c){G(b,c,a)}),b},w.qsa=function(b,a){var c,d="#"==a[0],e=!d&&"."==a[0],k=d||e?a.slice(1):a,f=X.test(k);return g(b)&&f&&d?(c=b.getElementById(k))?[c]:[]:1!==b.nodeType&&9!==b.nodeType?[]:C.call(f&&!d?e?b.getElementsByClassName(k):b.getElementsByTagName(a):b.querySelectorAll(a))},
e.contains=function(b,a){return b!==a&&b.contains(a)},e.type=d,e.isFunction=f,e.isWindow=h,e.isArray=v,e.isPlainObject=r,e.isEmptyObject=function(b){for(var a in b)return!1;return!0},e.inArray=function(b,a,c){return B.indexOf.call(a,b,c)},e.camelCase=M,e.trim=function(b){return null==b?"":String.prototype.trim.call(b)},e.uuid=0,e.support={},e.expr={},e.map=function(b,a){var c,d=[],k;if("number"==typeof b.length)for(k=0;k<b.length;k++)c=a(b[k],k),null!=c&&d.push(c);else for(k in b)c=a(b[k],k),null!=
c&&d.push(c);return 0<d.length?e.fn.concat.apply([],d):d},e.each=function(b,a){var c;if("number"==typeof b.length)for(c=0;c<b.length&&!1!==a.call(b[c],c,b[c]);c++);else for(c in b)if(!1===a.call(b[c],c,b[c]))break;return b},e.grep=function(b,c){return a.call(b,c)},window.JSON&&(e.parseJSON=JSON.parse),e.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(b,a){P["[object "+a+"]"]=a.toLowerCase()}),e.fn={forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,
indexOf:B.indexOf,concat:B.concat,map:function(b){return e(e.map(this,function(a,c){return b.call(a,c,a)}))},slice:function(){return e(C.apply(this,arguments))},ready:function(b){return V.test(c.readyState)&&c.body?b(e):c.addEventListener("DOMContentLoaded",function(){b(e)},!1),this},get:function(b){return b===u?C.call(this):this[0<=b?b:b+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},
each:function(b){return B.every.call(this,function(a,c){return!1!==b.call(a,c,a)}),this},filter:function(b){return f(b)?this.not(this.not(b)):e(a.call(this,function(a){return w.matches(a,b)}))},add:function(b,a){return e(N(this.concat(e(b,a))))},is:function(b){return 0<this.length&&w.matches(this[0],b)},not:function(b){var a=[];if(f(b)&&b.call!==u)this.each(function(c){b.call(this,c)||a.push(this)});else{var c="string"==typeof b?this.filter(b):"number"==typeof b.length&&f(b.item)?C.call(b):e(b);this.forEach(function(b){0>
c.indexOf(b)&&a.push(b)})}return e(a)},has:function(b){return this.filter(function(){return z(b)?e.contains(this,b):e(this).find(b).size()})},eq:function(b){return-1===b?this.slice(b):this.slice(b,+b+1)},first:function(){var b=this[0];return b&&!z(b)?b:e(b)},last:function(){var b=this[this.length-1];return b&&!z(b)?b:e(b)},find:function(b){var a,c=this;return"object"==typeof b?a=e(b).filter(function(){var b=this;return B.some.call(c,function(a){return e.contains(a,b)})}):1==this.length?a=e(w.qsa(this[0],
b)):a=this.map(function(){return w.qsa(this,b)}),a},closest:function(b,a){var c=this[0],d=!1;for("object"==typeof b&&(d=e(b));c&&!(d?0<=d.indexOf(c):w.matches(c,b));)c=c!==a&&!g(c)&&c.parentNode;return e(c)},parents:function(b){for(var a=[],c=this;0<c.length;)c=e.map(c,function(b){if((b=b.parentNode)&&!g(b)&&0>a.indexOf(b))return a.push(b),b});return l(a,b)},parent:function(b){return l(N(this.pluck("parentNode")),b)},children:function(b){return l(this.map(function(){return F(this)}),b)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},
siblings:function(b){return l(this.map(function(b,c){return a.call(F(c.parentNode),function(b){return b!==c})}),b)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(b){return e.map(this,function(a){return a[b]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");if("none"==getComputedStyle(this,"").getPropertyValue("display")){var b=this.style,a;a=this.nodeName;var d,e;a=(k[a]||(d=c.createElement(a),c.body.appendChild(d),
e=getComputedStyle(d,"").getPropertyValue("display"),d.parentNode.removeChild(d),"none"==e&&(e="block"),k[a]=e),k[a]);b.display=a}})},replaceWith:function(b){return this.before(b).remove()},wrap:function(b){var a=f(b);if(this[0]&&!a)var c=e(b).get(0),d=c.parentNode||1<this.length;return this.each(function(k){e(this).wrapAll(a?b.call(this,k):d?c.cloneNode(!0):c)})},wrapAll:function(b){if(this[0]){e(this[0]).before(b=e(b));for(var a;(a=b.children()).length;)b=a.first();e(b).append(this)}return this},
wrapInner:function(b){var a=f(b);return this.each(function(c){var d=e(this),k=d.contents();c=a?b.call(this,c):b;k.length?k.wrapAll(c):d.append(c)})},unwrap:function(){return this.parent().each(function(){e(this).replaceWith(e(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(b){return this.each(function(){var a=e(this);(b===u?"none"==a.css("display"):b)?a.show():a.hide()})},prev:function(b){return e(this.pluck("previousElementSibling")).filter(b||
"*")},next:function(b){return e(this.pluck("nextElementSibling")).filter(b||"*")},html:function(b){return 0===arguments.length?0<this.length?this[0].innerHTML:null:this.each(function(a){var c=this.innerHTML;e(this).empty().append(t(this,b,a,c))})},text:function(b){return 0===arguments.length?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=b===u?"":""+b})},attr:function(b,a){var c;return"string"==typeof b&&a===u?0==this.length||1!==this[0].nodeType?u:"value"==b&&"INPUT"==
this[0].nodeName?this.val():!(c=this[0].getAttribute(b))&&b in this[0]?this[0][b]:c:this.each(function(c){if(1===this.nodeType)if(z(b))for(m in b){c=m;var d=b[m];null==d?this.removeAttribute(c):this.setAttribute(c,d)}else c=t(this,a,c,this.getAttribute(b)),null==c?this.removeAttribute(b):this.setAttribute(b,c)})},removeAttr:function(b){return this.each(function(){1===this.nodeType&&this.removeAttribute(b)})},prop:function(b,a){return b=Y[b]||b,a===u?this[0]&&this[0][b]:this.each(function(c){this[b]=
t(this,a,c,this[b])})},data:function(b,a){var c=this.attr("data-"+b.replace(S,"-$1").toLowerCase(),a);return null!==c?y(c):u},val:function(b){return 0===arguments.length?this[0]&&(this[0].multiple?e(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(a){this.value=t(this,b,a,this.value)})},offset:function(b){if(b)return this.each(function(a){var c=e(this);a=t(this,b,a,c.offset());var d=c.offsetParent().offset();a={top:a.top-d.top,left:a.left-
d.left};"static"==c.css("position")&&(a.position="relative");c.css(a)});if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:Math.round(a.width),height:Math.round(a.height)}},css:function(b,a){if(2>arguments.length){var c=this[0],k=getComputedStyle(c,"");if(!c)return;if("string"==typeof b)return c.style[M(b)]||k.getPropertyValue(b);if(v(b)){var C={};return e.each(v(b)?b:[b],function(b,a){C[a]=c.style[M(a)]||k.getPropertyValue(a)}),
C}}var f="";if("string"==d(b))a||0===a?f=q(b)+":"+x(b,a):this.each(function(){this.style.removeProperty(q(b))});else for(m in b)b[m]||0===b[m]?f+=q(m)+":"+x(m,b[m])+";":this.each(function(){this.style.removeProperty(q(m))});return this.each(function(){this.style.cssText+=";"+f})},index:function(b){return b?this.indexOf(e(b)[0]):this.parent().children().indexOf(this[0])},hasClass:function(b){return b?B.some.call(this,function(b){return this.test(D(b))},s(b)):!1},addClass:function(b){return b?this.each(function(a){A=
[];var c=D(this);t(this,b,a,c).split(/\s+/g).forEach(function(b){e(this).hasClass(b)||A.push(b)},this);A.length&&D(this,c+(c?" ":"")+A.join(" "))}):this},removeClass:function(b){return this.each(function(a){if(b===u)return D(this,"");A=D(this);t(this,b,a,A).split(/\s+/g).forEach(function(b){A=A.replace(s(b)," ")});D(this,A.trim())})},toggleClass:function(b,a){return b?this.each(function(c){var d=e(this);t(this,b,c,D(this)).split(/\s+/g).forEach(function(b){(a===u?!d.hasClass(b):a)?d.addClass(b):d.removeClass(b)})}):
this},scrollTop:function(b){if(this.length){var a="scrollTop"in this[0];return b===u?a?this[0].scrollTop:this[0].pageYOffset:this.each(a?function(){this.scrollTop=b}:function(){this.scrollTo(this.scrollX,b)})}},scrollLeft:function(b){if(this.length){var a="scrollLeft"in this[0];return b===u?a?this[0].scrollLeft:this[0].pageXOffset:this.each(a?function(){this.scrollLeft=b}:function(){this.scrollTo(b,this.scrollY)})}},position:function(){if(this.length){var b=this[0],a=this.offsetParent(),c=this.offset(),
d=L.test(a[0].nodeName)?{top:0,left:0}:a.offset();return c.top-=parseFloat(e(b).css("margin-top"))||0,c.left-=parseFloat(e(b).css("margin-left"))||0,d.top+=parseFloat(e(a[0]).css("border-top-width"))||0,d.left+=parseFloat(e(a[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent||c.body;b&&!L.test(b.nodeName)&&"static"==e(b).css("position");)b=b.offsetParent;return b})}},e.fn.detach=e.fn.remove,["width",
"height"].forEach(function(b){var a=b.replace(/./,function(b){return b[0].toUpperCase()});e.fn[b]=function(c){var d,k=this[0];return c===u?h(k)?k["inner"+a]:g(k)?k.documentElement["scroll"+a]:(d=this.offset())&&d[b]:this.each(function(a){k=e(this);k.css(b,t(this,c,a,k[b]()))})}}),["after","prepend","before","append"].forEach(function(b,a){var c=a%2;e.fn[b]=function(){var b,k=e.map(arguments,function(a){return b=d(a),"object"==b||"array"==b||null==a?a:w.fragment(a)}),C,f=1<this.length;return 1>k.length?
this:this.each(function(b,d){C=c?d:d.parentNode;d=0==a?d.nextSibling:1==a?d.firstChild:2==a?d:null;k.forEach(function(b){if(f)b=b.cloneNode(!0);else if(!C)return e(b).remove();I(C.insertBefore(b,d),function(b){null==b.nodeName||"SCRIPT"!==b.nodeName.toUpperCase()||b.type&&"text/javascript"!==b.type||b.src||window.eval.call(window,b.innerHTML)})})})};e.fn[c?b+"To":"insert"+(a?"Before":"After")]=function(a){return e(a)[b](this),this}}),w.Z.prototype=e.fn,w.uniq=N,w.deserializeValue=y,e.zepto=w,e}();
window.Zepto=Zepto;void 0===window.$&&(window.$=Zepto);
(function(d){function f(d){return d._zid||(d._zid=s++)}function h(d,a,c,k){a=g(a);if(a.ns)var e=RegExp("(?:^| )"+a.ns.replace(" "," .* ?")+"(?: |$)");return(t[f(d)]||[]).filter(function(d){return d&&(!a.e||d.e==a.e)&&(!a.ns||e.test(d.ns))&&(!c||f(d.fn)===f(c))&&(!k||d.sel==k)})}function g(d){d=(""+d).split(".");return{e:d[0],ns:d.slice(1).sort().join(" ")}}function z(d){return u[d]||y&&I[d]||d}function r(e,a,c,k,J,h,l){var H=f(e),n=t[H]||(t[H]=[]);a.split(/\s/).forEach(function(a){if("ready"==a)return d(document).ready(c);
var f=g(a);f.fn=c;f.sel=J;f.e in u&&(c=function(a){var c=a.relatedTarget;if(!c||c!==this&&!d.contains(this,c))return f.fn.apply(this,arguments)});var H=(f.del=h)||c;f.proxy=function(a){a=p(a);if(!a.isImmediatePropagationStopped()){a.data=k;var c=H.apply(e,a._args==x?[a]:[a].concat(a._args));return!1===c&&(a.preventDefault(),a.stopPropagation()),c}};f.i=n.length;n.push(f);"addEventListener"in e&&e.addEventListener(z(f.e),f.proxy,f.del&&!y&&f.e in I||!!l)})}function v(d,a,c,e,g){var K=f(d);(a||"").split(/\s/).forEach(function(a){h(d,
a,c,e).forEach(function(a){delete t[K][a.i];"removeEventListener"in d&&d.removeEventListener(z(a.e),a.proxy,a.del&&!y&&a.e in I||!!g)})})}function p(f,a){if(a||!f.isDefaultPrevented)if(a||(a=f),d.each(B,function(c,d){var g=a[c];f[c]=function(){return this[d]=m,g&&g.apply(a,arguments)};f[d]=e}),a.defaultPrevented!==x?a.defaultPrevented:"returnValue"in a?!1===a.returnValue:a.getPreventDefault&&a.getPreventDefault())f.isDefaultPrevented=m;return f}function q(d){var a,c={originalEvent:d};for(a in d)!A.test(a)&&
d[a]!==x&&(c[a]=d[a]);return p(c,d)}var s=1,x,F=Array.prototype.slice,G=d.isFunction,l=function(d){return"string"==typeof d},t={},D={},y="onfocusin"in window,I={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};D.click=D.mousedown=D.mouseup=D.mousemove="MouseEvents";d.event={add:r,remove:v};d.proxy=function(e,a){if(G(e)){var c=function(){return e.apply(a,arguments)};return c._zid=f(e),c}if(l(a))return d.proxy(e[a],e);throw new TypeError("expected function");};d.fn.bind=
function(d,a,c){return this.on(d,a,c)};d.fn.unbind=function(d,a){return this.off(d,a)};d.fn.one=function(d,a,c,e){return this.on(d,a,c,e,1)};var m=function(){return!0},e=function(){return!1},A=/^([A-Z]|returnValue$|layer[XY]$)/,B={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};d.fn.delegate=function(d,a,c){return this.on(a,d,c)};d.fn.undelegate=function(d,a,c){return this.off(a,d,c)};d.fn.live=function(e,a){return d(document.body).delegate(this.selector,
e,a),this};d.fn.die=function(e,a){return d(document.body).undelegate(this.selector,e,a),this};d.fn.on=function(f,a,c,k,g){var h,E,m=this;if(f&&!l(f))return d.each(f,function(d,e){m.on(d,a,c,e,g)}),m;!l(a)&&!G(k)&&!1!==k&&(k=c,c=a,a=x);if(G(c)||!1===c)k=c,c=x;return!1===k&&(k=e),m.each(function(e,l){g&&(h=function(a){return v(l,a.type,k),k.apply(this,arguments)});a&&(E=function(c){var e,f=d(c.target).closest(a,l).get(0);if(f&&f!==l)return e=d.extend(q(c),{currentTarget:f,liveFired:l}),(h||k).apply(f,
[e].concat(F.call(arguments,1)))});r(l,f,k,c,a,E||h)})};d.fn.off=function(f,a,c){var k=this;return f&&!l(f)?(d.each(f,function(c,d){k.off(c,a,d)}),k):(!l(a)&&!G(c)&&!1!==c&&(c=a,a=x),!1===c&&(c=e),k.each(function(){v(this,f,c,a)}))};d.fn.trigger=function(e,a){return e=l(e)||d.isPlainObject(e)?d.Event(e):p(e),e._args=a,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):d(this).triggerHandler(e,a)})};d.fn.triggerHandler=function(e,a){var c,k;return this.each(function(f,g){c=q(l(e)?d.Event(e):
e);c._args=a;c.target=g;d.each(h(g,e.type||e),function(a,d){k=d.proxy(c);if(c.isImmediatePropagationStopped())return!1})}),k};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){d.fn[e]=function(a){return a?this.bind(e,a):this.trigger(e)}});["focus","blur"].forEach(function(e){d.fn[e]=function(a){return a?this.bind(e,a):this.each(function(){try{this[e]()}catch(a){}}),
this}});d.Event=function(d,a){l(d)||(a=d,d=a.type);var c=document.createEvent(D[d]||"Events"),e=!0;if(a)for(var f in a)"bubbles"==f?e=!!a[f]:c[f]=a[f];return c.initEvent(d,e,!0),p(c)}})(Zepto);
(function(d){function f(a,c,e,f){if(a.global)return a=c||t,e=d.Event(e),d(a).trigger(e,f),!e.isDefaultPrevented()}function h(a){a.global&&0===d.active++&&f(a,null,"ajaxStart")}function g(a,c){var d=c.context;if(!1===c.beforeSend.call(d,a,c)||!1===f(c,d,"ajaxBeforeSend",[a,c]))return!1;f(c,d,"ajaxSend",[a,c])}function z(a,c,d,e){var g=d.context;d.success.call(g,a,"success",c);e&&e.resolveWith(g,[a,"success",c]);f(d,g,"ajaxSuccess",[c,d,a]);v("success",c,d)}function r(a,c,d,e,g){var h=e.context;e.error.call(h,
d,c,a);g&&g.rejectWith(h,[d,c,a]);f(e,h,"ajaxError",[d,e,a||c]);v(c,d,e)}function v(a,c,e){var g=e.context;e.complete.call(g,c,a);f(e,g,"ajaxComplete",[c,e]);e.global&&!--d.active&&f(e,null,"ajaxStop")}function p(){}function q(a){return a&&(a=a.split(";",2)[0]),a&&(a==A?"html":a==e?"json":u.test(a)?"script":m.test(a)&&"xml")||"text"}function s(a,c){return""==c?a:(a+"&"+c).replace(/[&?]{1,2}/,"?")}function x(a){a.processData&&a.data&&"string"!=d.type(a.data)&&(a.data=d.param(a.data,a.traditional));
a.data&&(!a.type||"GET"==a.type.toUpperCase())&&(a.url=s(a.url,a.data),a.data=void 0)}function F(a,c,e,f){var g=!d.isFunction(c);return{url:a,data:g?c:void 0,success:g?d.isFunction(e)?e:void 0:c,dataType:g?f||e:e}}function G(a,c,e,f){var g,h=d.isArray(c),l=d.isPlainObject(c);d.each(c,function(c,m){g=d.type(m);f&&(c=e?f:f+"["+(l||"object"==g||"array"==g?c:"")+"]");!f&&h?a.add(m.name,m.value):"array"==g||!e&&"object"==g?G(a,m,e,c):a.add(c,m)})}var l=0,t=window.document,D,y,I=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
u=/^(?:text|application)\/javascript/i,m=/^(?:text|application)\/xml/i,e="application/json",A="text/html",B=/^\s*$/;d.active=0;d.ajaxJSONP=function(a,c){if("type"in a){var e=a.jsonpCallback,f=(d.isFunction(e)?e():e)||"jsonp"+ ++l,h=t.createElement("script"),m=window[f],p,n=function(a){d(h).triggerHandler("error",a||"abort")},q={abort:n},s;return c&&c.promise(q),d(h).on("load error",function(e,g){clearTimeout(s);d(h).off().remove();"error"!=e.type&&p?z(p[0],q,a,c):r(null,g||"error",q,a,c);window[f]=
m;p&&d.isFunction(m)&&m(p[0]);m=p=void 0}),!1===g(q,a)?(n("abort"),q):(window[f]=function(){p=arguments},h.src=a.url.replace(/=\?/,"="+f),t.head.appendChild(h),0<a.timeout&&(s=setTimeout(function(){n("timeout")},a.timeout)),q)}return d.ajax(a)};d.ajaxSettings={type:"GET",beforeSend:p,success:p,error:p,complete:p,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:e,xml:"application/xml, text/xml",
html:A,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};d.ajax=function(a){var c=d.extend({},a||{}),e=d.Deferred&&d.Deferred();for(D in d.ajaxSettings)void 0===c[D]&&(c[D]=d.ajaxSettings[D]);h(c);c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host);c.url||(c.url=window.location.toString());x(c);!1===c.cache&&(c.url=s(c.url,"_="+Date.now()));var f=c.dataType;a=/=\?/.test(c.url);if("jsonp"==f||a)return a||(c.url=s(c.url,c.jsonp?c.jsonp+
"=?":!1===c.jsonp?"":"callback=?")),d.ajaxJSONP(c,e);a=c.accepts[f];var l={},m=function(a,c){l[a.toLowerCase()]=[a,c]},t=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,n=c.xhr(),u=n.setRequestHeader,v;e&&e.promise(n);c.crossDomain||m("X-Requested-With","XMLHttpRequest");m("Accept",a||"*/*");if(a=c.mimeType||a)-1<a.indexOf(",")&&(a=a.split(",",2)[0]),n.overrideMimeType&&n.overrideMimeType(a);(c.contentType||!1!==c.contentType&&c.data&&"GET"!=c.type.toUpperCase())&&m("Content-Type",
c.contentType||"application/x-www-form-urlencoded");if(c.headers)for(y in c.headers)m(y,c.headers[y]);n.setRequestHeader=m;n.onreadystatechange=function(){if(4==n.readyState){n.onreadystatechange=p;clearTimeout(v);var a,g=!1;if(200<=n.status&&300>n.status||304==n.status||0==n.status&&"file:"==t){f=f||q(c.mimeType||n.getResponseHeader("content-type"));a=n.responseText;try{"script"==f?(0,eval)(a):"xml"==f?a=n.responseXML:"json"==f&&(a=B.test(a)?null:d.parseJSON(a))}catch(h){g=h}g?r(g,"parsererror",
n,c,e):z(a,n,c,e)}else r(n.statusText||null,n.status?"error":"abort",n,c,e)}};if(!1===g(n,c))return n.abort(),r(null,"abort",n,c,e),n;if(c.xhrFields)for(y in c.xhrFields)n[y]=c.xhrFields[y];n.open(c.type,c.url,"async"in c?c.async:!0,c.username,c.password);for(y in l)u.apply(n,l[y]);return 0<c.timeout&&(v=setTimeout(function(){n.onreadystatechange=p;n.abort();r(null,"timeout",n,c,e)},c.timeout)),n.send(c.data?c.data:null),n};d.get=function(a,c,e,f){return d.ajax(F.apply(null,arguments))};d.post=function(a,
c,e,f){var g=F.apply(null,arguments);return g.type="POST",d.ajax(g)};d.getJSON=function(a,c,e){var f=F.apply(null,arguments);return f.dataType="json",d.ajax(f)};d.fn.load=function(a,c,e){if(!this.length)return this;var f=this,g=a.split(/\s/),h;a=F(a,c,e);var l=a.success;return 1<g.length&&(a.url=g[0],h=g[1]),a.success=function(a){f.html(h?d("<div>").html(a.replace(I,"")).find(h):a);l&&l.apply(f,arguments)},d.ajax(a),this};var C=encodeURIComponent;d.param=function(a,c){var d=[];return d.add=function(a,
c){this.push(C(a)+"="+C(c))},G(d,a,c),d.join("&").replace(/%20/g,"+")}})(Zepto);
(function(d){d.fn.serializeArray=function(){var f=[],h;return d([].slice.call(this.get(0).elements)).each(function(){h=d(this);var g=h.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=g&&"reset"!=g&&"button"!=g&&("radio"!=g&&"checkbox"!=g||this.checked)&&f.push({name:h.attr("name"),value:h.val()})}),f};d.fn.serialize=function(){var d=[];return this.serializeArray().forEach(function(h){d.push(encodeURIComponent(h.name)+"="+encodeURIComponent(h.value))}),d.join("&")};
d.fn.submit=function(f){f?this.bind("submit",f):this.length&&(f=d.Event("submit"),this.eq(0).trigger(f),f.isDefaultPrevented()||this.get(0).submit());return this}})(Zepto);(function(d){"__proto__"in{}||d.extend(d.zepto,{Z:function(f,h){return f=f||[],d.extend(f,d.fn),f.selector=h||"",f.__Z=!0,f},isZ:function(f){return"array"===d.type(f)&&"__Z"in f}});try{getComputedStyle(void 0)}catch(f){var h=getComputedStyle;window.getComputedStyle=function(d){try{return h(d)}catch(f){return null}}}})(Zepto);var NatMusConfig={endpoint:"http://samlinger.natmus.dk/CIP/",constants:{catch_all_alias:"any",layout_alias:"web"},catalog_aliases:{Alle:"ALL",Antiksamlingen:"AS",Bevaringsafdelingen:"BA","Danmarks Middelalder og Ren\u00e6ssance":"DMR","Danmarks Nyere Tid":"DNT","Etnografisk samling":"ES",Frihedsmuseet:"FHM","Den Kgl. M\u00f8nt- og Medaljesamling":"KMM",Musikmuseet:"MUM"}};
